<div class="nested-fields">
  <div class="row">
    <div class="col-sm-2">
      <%= f.input :quantity %>
    </div>
    <div class="col-sm-2">
      <%= f.input :unit, collection: ([ "Individual", "24 - Box","36 - Box", "Gourmet Box"]), input_html: { class: "unit"} %>
    </div>
    <div class="col-sm-2">
      <%= f.input :packaging, collection: ([ "Loose", "3-Pack","1-Pack","Twist Tie-Bagged","Bow-Bagged", "Gourmet-Pack"]) %>
    </div>
    <div class="col-sm-2">
      <%= f.association :stock_type, collection: StockType.where('name <> "Caramel Apple"')%>
    </div>
    <div class="col-sm-2">
      <%= f.association :stock %>
    </div>
    <div class="col-sm-2">
      <%= link_to_remove_association 'Remove Order Item', f, class: "btn btn-default btn form-button dropbutton" %>
    </div>
  </div>
</div>
<!-- f.input :country_id, collection: @continents, as: :grouped_select, group_method: :countries -->


  <div class="field">
    <#%= f.collection_select :country_id, Country.order(:name), :id, :name, include_blank: true %>
  </div>
  <div class="field">
    <#%= f.grouped_collection_select :state_id, Country.order(:name), :states, :name, :id, :name, include_blank: true %>
  </div>


<script type="text/javascript">
  states = $('#person_state_id').html()
  $('#person_country_id').change ->
    country = $('#person_country_id :selected').text()
    options = $(states).filter("optgroup[label='#{escaped_country}']").html()
    if options
      $('#person_state_id').html(options)
      $('#person_state_id').parent().show()
    else
      $('#person_state_id').empty()
      $('#person_state_id').parent().hide()
</script>
